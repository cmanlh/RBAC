package average;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

public class AverageCalHelper {

	public static List<AverageData> macdCal(List<TradingStatisticsData> dataList, final int calStep) {
		List<AverageData> averageDataList = new ArrayList<AverageData>();

		int counter = 0;
		AverageData averageData = new AverageData();
		for (TradingStatisticsData data : dataList) {
			if (calStep == counter) {
				averageData.setAveragePrice(averageData.getAveragePrice().divide(BigDecimal.valueOf(calStep)));
				averageData.setClosePrice(averageData.getClosePrice().divide(BigDecimal.valueOf(calStep)));
				averageDataList.add(averageData);

				averageData = new AverageData();
				counter = 0;
			}

			averageData.setAveragePrice(averageData.getAveragePrice().add(data.getAveragePrice()));
			averageData.setClosePrice(averageData.getClosePrice().add(data.getClosePrice()));
			averageData.setTime(data.getTime());
			averageData.setVolume(averageData.getVolume() + data.getVolume());

			counter++;
		}

		return averageDataList;
	}
}
